(this["webpackJsonpreact-hw-04-movies"]=this["webpackJsonpreact-hw-04-movies"]||[]).push([[0],{26:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(6),o=a.n(r),s=(a(26),a(9)),i=a.n(s),u=a(11),l=a(20),b=a(4),j=a(10),m=a.n(j);m.a.defaults.baseURL="https://pixabay.com/api/";var d={fetchImages:function(e){var t=e.query,a=e.currentPage,n=e.perPage;return m.a.get("?q=".concat(t,"&page=").concat(a,"&key=").concat("20634365-1f280baa9861a1cbb9baba7ac","&image_type=photo&orientation=horizontal&per_page=").concat(n)).then((function(e){var t=e.data;if(0===t.hits.length)throw new Error("No images were found for your request. Try again");return t.hits}))}},f=a(21),h=a.n(f),g=a(0),O=function(e){var t=e.onSubmit,a=Object(n.useState)(""),c=Object(b.a)(a,2),r=c[0],o=c[1];return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("header",{className:"Searchbar",children:Object(g.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),t(r)},children:[Object(g.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(g.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(g.jsx)("input",{className:"SearchForm-input",name:"inputQuery",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:r,onChange:function(e){var t=e.currentTarget.value;o(t)}})]})})})},p=function(e){var t=e.image,a=e.onModal,n=t.webformatURL,c=t.largeImageURL,r=t.tags;return Object(g.jsx)("li",{className:"ImageGalleryItem",children:Object(g.jsx)("img",{src:n,alt:r,className:"ImageGalleryItem-image",onClick:function(){return a(c,r)}})})},v=function(e){var t=e.images,a=e.onModal;return Object(g.jsx)("ul",{className:"ImageGallery",images:t,children:t.map((function(e){return Object(g.jsx)(p,{image:e,onModal:a},e.id)}))})},x=function(e){var t=e.children;return Object(g.jsx)("div",{children:t})},S=document.querySelector("#modal-root"),w=function(e){var t=e.imgModal,a=e.tagsModal,c=e.onToggleModal;Object(n.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}),[]);var o=function(e){"Escape"===e.code&&c()};return Object(r.createPortal)(Object(g.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&c()},children:Object(g.jsx)("div",{className:"Modal",children:Object(g.jsx)("img",{src:t,alt:a})})}),S)},y=function(e){var t=e.onClick;return Object(g.jsx)("button",{type:"button",className:"Button",onClick:t,children:Object(g.jsx)("span",{className:"",children:"Load more"})})},N=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),o=Object(b.a)(r,2),s=o[0],j=o[1],m=Object(n.useState)(1),f=Object(b.a)(m,2),p=f[0],S=f[1],N=Object(n.useState)(12),M=Object(b.a)(N,1)[0],k=Object(n.useState)(!1),I=Object(b.a)(k,2),L=I[0],E=I[1],C=Object(n.useState)(null),F=Object(b.a)(C,2),R=F[0],U=F[1],T=Object(n.useState)(!1),q=Object(b.a)(T,2),P=q[0],B=q[1],G=Object(n.useState)(""),J=Object(b.a)(G,2),_=J[0],z=J[1],D=Object(n.useState)(""),H=Object(b.a)(D,1)[0],Q=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={query:s,currentPage:p,perPage:M},E(!0),e.next=5,d.fetchImages(t);case 5:a=e.sent,n=a.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}})),c((function(e){return[].concat(Object(u.a)(e),Object(u.a)(n))})),S((function(e){return e+1})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),U(e.t0.message);case 14:return e.prev=14,E(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){""!==s&&(c([]),S(1),Q())}),[s]),Object(n.useEffect)((function(){p>2&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[p]);var A=a.length>0&&!L;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O,{onSubmit:function(e){j(e)}}),R&&Object(g.jsx)("h1",{className:"Error",children:R}),Object(g.jsx)(v,{images:a,onModal:function(e){console.log("Modal"),B((function(e){return!e})),z(e)}}),L&&Object(g.jsx)(h.a,{type:"Circles",color:"#3f51b5",height:200,width:200,timeout:3e3,className:"Loader"}),Object(g.jsx)(x,{children:A&&Object(g.jsx)(y,{className:"Button",onClick:Q})}),P&&Object(g.jsx)(w,{imgModal:_,tagsModal:H,onToggleModal:function(e){B((function(e){return!e}))}})]})};o.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(N,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.e0910e46.chunk.js.map